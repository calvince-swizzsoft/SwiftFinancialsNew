@model Guid

@{
    ViewBag.Title = "Micro Credit Group Members";
    var microCreditGroupId = Model; // The Guid passed from the controller
}

<h2>Micro Credit Group Members</h2>

<table id="microCreditGroupMembersTable" class="table table-striped table-bordered" style="width:100%">
    <thead>
        <tr>
            <th>Member Name</th>
            <th>Role</th>
            <th>Joining Date</th>
            <th>Status</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        <!-- DataTable will populate this dynamically -->
    </tbody>
</table>

@section Scripts {
    <script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js"></script>
    <script>
        $(document).ready(function () {
            $('#microCreditGroupMembersTable').DataTable({
                "processing": true,
                "serverSide": true,
                "ajax": {
                    "url": '@Url.Action("Index", "MicroCreditGroup")',
                    "type": "POST",
                    "data": function (d) {
                        d.microCreditGroupId = '@microCreditGroupId'; // Use the Guid passed to the view
                    }
                },
                "columns": [
                    { "data": "MemberName", "name": "MemberName" },
                    { "data": "Role", "name": "Role" },
                    { "data": "JoiningDate", "name": "JoiningDate", "render": function (data) {
                        return data ? new Date(data).toLocaleDateString() : "";
                    }},
                    { "data": "Status", "name": "Status" },
                    {
                        "data": "Id",
                        "render": function (data, type, row) {
                            return `
                                <a href="/MicroCreditGroup/Details/${data}" class="btn btn-primary btn-sm">Details</a>
                                <a href="/MicroCreditGroup/Edit/${data}" class="btn btn-warning btn-sm">Edit</a>
                            `;
                        }
                    }
                ],
                "order": [[2, "desc"]]
            });
        });
    </script>
}
