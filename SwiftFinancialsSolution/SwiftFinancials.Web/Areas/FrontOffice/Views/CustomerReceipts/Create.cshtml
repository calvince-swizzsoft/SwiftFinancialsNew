@model SwiftFinancials.Presentation.Infrastructure.Models.TransactionModel

@{
    /**/

    ViewBag.Title = "Create Customer Receipt";
    var apportionToType = ViewBag.ApportionToSelectList as List<SelectListItem>;

    var apportionToTypeDictionary = apportionToType.ToDictionary(item => item.Value, item => item.Text);

    var productCode = ViewBag.ProductCode as List<SelectListItem>;
    var recordStatus = ViewBag.RecordStatusSelectList as List<SelectListItem>;

    var customerFilter = ViewBag.CustomerFilterSelectList as List<SelectListItem>;
    var documents = ViewBag.Documents as List<SwiftFinancials.Web.Areas.Registry.DocumentsModel.Document>;

}

<head>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

    <style>

        .custom-modal-styles {
            max-width: 850px; /* Fixed width for modal */
            max-height: 850px; /* Fixed height */
            margin: 50px auto; /* Center modal with space around it */
        }

        .modal-content {
            display: flex;
            flex-direction: column;
            height: 100%;
            overflow: hidden; /* Ensure no scrolling for modal */
        }

        .modal-body {
            display: flex;
            flex-direction: column;
            height: 100%;
            overflow: hidden;
        }

        .table-scroll {
            flex-grow: 1; /* Allow table content to grow */
            overflow-y: auto; /* Scrollable table data */
            max-height: 300px; /* Set max height for table data */
        }

        .table thead th {
            position: sticky; /* Keep headers fixed */
            top: 0; /* Fix headers at top */
            background-color: white; /* Ensure visibility */
            z-index: 10; /* Layer above the table */
        }

        .modal-footer {
            flex-shrink: 0; /* Fixed footer at the bottom */

            text-align: right;
            border-top: 1px solid #ddd;
        }

        /* Ensuring proper margin and width control */
        .form-row {
            margin-bottom: 15px; /* Add spacing between the form row and the element below */
        }

        .btn-primary {
            margin-right: 0; /* Ensure no unnecessary right margin */
        }


        .blue-section1 {
            background-color: #e6f3ff;
            padding: 10px; /* Padding inside the border */
            border-radius: 8px; /* Rounded corners (optional) */


            font-size: 16px;
            font-weight: bold;
        }

        /* Primary Tabs */
        /*.nav-tabs .nav-link {
            background-color: transparent;
            color: #8a949e;*/ /* Slightly lighter grey */
            /*border: 1px solid transparent;
        }

            .nav-tabs .nav-link:hover {
                border-color: #e9ecef #e9ecef #dee2e6;
            }

            .nav-tabs .nav-link.active {
                background-color: #8a949e;*/ /* Lighter grey for active tab */
                /*color: white;
                border-color: #8a949e;
            }*/

        .inner-nav-tabs .inner-nav-link {
            display: block;
            padding: 0.5rem 1rem;
            color: #007bff;
            background-color: transparent;
            border-radius: 0.25rem;
            transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out;
            text-decoration: none;
        }

            .inner-nav-tabs .inner-nav-link:hover {
                color: #0056b3;
                background-color: #e9ecef;
            }

            .inner-nav-tabs .inner-nav-link.active {
                color: #495057;
                background-color: #fff;
                border: 1px solid #dee2e6;
                border-bottom-color: transparent; /* To match the Bootstrap look */
            }


        .apportionment-nav-tabs .apportionment-nav-link {
            background-color: transparent;
            color: #8a949e; /* Slightly lighter grey */
            border: 1px solid transparent;
            display: block;
            padding: 0.5rem 1rem;
            color: #007bff;
            background-color: transparent;
            border-radius: 0.25rem;
            transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out;
            text-decoration: none;
        }

            .apportionment-nav-tabs .apportionment-nav-link:hover {
                color: #0056b3;
                background-color: #e9ecef;
            }

            .apportionment-nav-tabs .apportionment-nav-link.active {
                color: #495057;
                background-color: #fff;
                border: 1px solid #dee2e6;
                border-bottom-color: transparent; /* To match the Bootstrap look */
            }

        /* Tab Content */
        .tab-content > .tab-pane,
        .inner-tab-content > .inner-tab-pane,
        .apportionment-tab-content > .apportionment-tab-pane {
            display: none;
        }

            .tab-content > .tab-pane.active,
            .inner-tab-content > .inner-tab-pane.active,
            .apportionment-tab-content > .apportionment-tab-pane.active {
                display: block;
            }

        /* Existing styles for upload containers and boxes */
        .upload-container {
            display: flex;
            justify-content: space-between;
            gap: 10px;
        }

        .upload-box {
            width: 24%;
            border: 2px solid #ccc;
            border-radius: 4px;
            padding: 10px;
            background-color: white;
            text-align: center;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            height: 450px;
        }

            .upload-box label {
                font-size: 14px;
                margin-bottom: 8px;
                font-weight: bold;
            }

            .upload-box .upload-area {
                flex-grow: 1;
                border: 2px dashed #ccc;
                border-radius: 4px;
                display: flex;
                align-items: center;
                justify-content: center;
                color: #888;
                font-size: 14px;
            }
    </style>
</head>

<div class="row wrapper border-bottom white-bg page-heading">
    <div class="col-lg-12">
        <h2>Cash Transactions</h2>
        <ol class="breadcrumb">
            <li class="breadcrumb-item">
                @Html.ActionLink("Dashboard", "Index", "Home", new { Area = "" }, null)
            </li>
            <li class="breadcrumb-item">
                @Html.ActionLink("Home", "Create", "CustomerReceipts", new { Area = "FrontOffice" }, null)
            </li>
            <li class="breadcrumb-item active">
                <strong>Create</strong>
            </li>
        </ol>
    </div>
</div>

@if (TempData["Error"] != null)
{
    <div class="alert alert-danger fade in">
        <button class="close" data-dismiss="alert">
            ×
        </button>
        <i class="fa-fw fa fa-times"></i>
        <strong>Error!</strong> @TempData["Error"]
    </div>
}

<div class="wrapper wrapper-content">
    <div class="row">
        <div class="col-lg-12">
            <div class="ibox">
                <div class="ibox-content bg-white text-info" style="border: 1px solid #ddd; border-radius: 4px; padding: 20px; margin-bottom: 20px;">
                    @using (Html.BeginForm("Create", "CustomerReceipts", new { Area = "FrontOffice" }, FormMethod.Post, new { id = "customerReceiptsForm" }))
                    {
                        @Html.AntiForgeryToken()
                        <div class="form-horizontal">
                            @Html.ValidationSummary(true, "", new { @class = "text-danger" })

                            <div id="DebitCustomerContainer" style="border: 1px solid #ddd; border-radius: 8px; padding: 20px; margin-bottom: 20px;">
                                <!-- First Row -->
                                <div class="row">
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            @Html.LabelFor(model => model.CustomerDTO.FullName, "Customer:", new { @class = "control-label" })
                                            <div class="input-group" data-autoclose="true">
                                                @Html.TextBoxFor(model => model.CustomerDTO.FullName, new { @class = "form-control", @readonly = "readonly", @id = "FullName" })
                                                <span class="input-group-addon">
                                                    <a data-toggle="modal" data-target="#CustomerLookupModal">
                                                        <span class="fa fa-search"></span>
                                                    </a>
                                                </span>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-md-3">
                                        <div class="form-group">
                                            @Html.LabelFor(model => model.CustomerDTO.Type, "Type:", new { @class = "control-label", @id = "Type" })
                                            @Html.TextBoxFor(model => model.CustomerDTO.TypeDescription, new { @class = "form-control", @readonly = "readonly", @id = "TypeDescription" })
                                        </div>
                                    </div>

                                    <div class="col-md-3">
                                        <div class="form-group">
                                            @Html.LabelFor(model => model.CustomerDTO.StationZoneDivisionEmployerId, "Employer:", new { @class = "control-label", @id = "StationZoneDivisionEmployerId" })
                                            @Html.TextBoxFor(model => model.CustomerDTO.StationZoneDivisionEmployerDescription, new { @class = "form-control", @readonly = "readonly", @id = "StationZoneDivisionEmployerDescription" })
                                        </div>
                                    </div>


                                    <div class="col-md-3">
                                        <div class="form-group">
                                            @Html.LabelFor(model => model.CustomerDTO.StationId, "Station:", new { @class = "control-label", @id = "StationId" })
                                            @Html.TextBoxFor(model => model.CustomerDTO.StationDescription, new { @class = "form-control", @readonly = "readonly", @id = "StationDescription" })
                                        </div>
                                    </div>
                                </div>


                                <!-- Second Row -->
                                <div class="row">
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            @*@Html.HiddenFor(model => model.DebitCustomerAccountId, new { @id = "DebitCustomerAccountId" })
                                                @Html.HiddenFor(model => model.DebitCustomerAccountJson, new { @id = "DebitCustomerAccountJson" })*@
                                            @Html.LabelFor(model => model.CustomerDTO.RegistrationDate, "Registration Date:", new { @class = "control-label" })
                                            @Html.TextBoxFor(model => model.CustomerDTO.RegistrationDate, new { @class = "form-control", @readonly = "readonly", @id = "RegistrationDate" })
                                        </div>
                                    </div>

                                    <div class="col-md-6">
                                        <div class="form-group">
                                            @Html.LabelFor(model => model.CustomerDTO.IndividualPayrollNumbers, "Payroll Numbers:", new { @class = "control-label", })
                                            @Html.TextBoxFor(model => model.CustomerDTO.IndividualPayrollNumbers, new { @class = "form-control", @readonly = "readonly", @id = "IndividualPayrollNumbers" })
                                        </div>
                                    </div>

                                    <div class="col-md-3">
                                        <div class="form-group">
                                            @Html.LabelFor(model => model.CustomerDTO.Remarks, "Remarks:", new { @class = "control-label" })
                                            @Html.TextBoxFor(model => model.CustomerDTO.Remarks, new { @class = "form-control", @readonly = "readonly", @id = "Remarks" })
                                        </div>
                                    </div>

                                </div>


                                <!-- Third Row -->
                                <div class="row">
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            @Html.LabelFor(model => model.CustomerDTO.IdentificationNumber, new { @class = "control-label" })
                                            @Html.TextBoxFor(model => model.CustomerDTO.IdentificationNumber, new { @class = "form-control", @readonly = "readonly", @id = "IdentificationNumber" })
                                        </div>
                                    </div>

                                    <div class="col-md-3">
                                        <div class="form-group">
                                            @Html.LabelFor(model => model.CustomerDTO.Reference1, "Account Number:", new { @class = "control-label" })
                                            @Html.TextBoxFor(model => model.CustomerDTO.Reference1, new { @class = "form-control", @readonly = "readonly", @id = "Reference1" })
                                        </div>
                                    </div>

                                    <div class="col-md-3">
                                        <div class="form-group">
                                            @Html.LabelFor(model => model.CustomerDTO.Reference2, "Membership Number:", new { @class = "control-label" })
                                            @Html.TextBoxFor(model => model.CustomerDTO.Reference2, new { @class = "form-control", @readonly = "readonly", @id = "Reference2" })
                                        </div>
                                    </div>

                                    <div class="col-md-3">
                                        <div class="form-group">
                                            @Html.LabelFor(model => model.CustomerDTO.Reference3, "Personal File Number:", new { @class = "control-label" })
                                            @Html.TextBoxFor(model => model.CustomerDTO.Reference3, new { @class = "form-control", @readonly = "readonly", @id = "Reference3" })
                                        </div>
                                    </div>
                                </div>

                            </div>
                            <!-- Tabs -->
                            <ul class="nav nav-tabs" style="margin-bottom: 20px;">
                                <li class="nav-item">
                                    <a class="nav-link active" data-toggle="tab" href="#transaction">Transaction</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" data-toggle="tab" href="#tellerGlAccountStatementCustomerReceipts">Teller G/L Account Statement</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" data-toggle="tab" href="#customerAccountPreview">Customer Account Preview</a>
                                </li>
                            </ul>

                            <div class="tab-content">
                                <div id="transaction" class="tab-pane active">

                                    <!-- Secondary Tabs (indented) -->
                                    <div style="margin-left: 20px;">
                                        <ul class="nav inner-nav-tabs" style="margin-bottom: 20px;">
                                            <li class="inner-nav-item">
                                                <a class="inner-nav-link active" data-toggle="tab" href="#cashReceipt">Cash Receipt</a>
                                            </li>
                                            <li class="inner-nav-item">
                                                <a class="inner-nav-link" data-toggle="tab" href="#apportionment">Apportionment (Loan / Investment / Savings / GL Account)</a>
                                            </li>
                                            <li class="inner-nav-item">
                                                <a class="inner-nav-link" data-toggle="tab" href="#specimen">Specimen</a>
                                            </li>
                                        </ul>

                                        <div class="inner-tab-content" style="border: 1px solid #ddd; padding: 20px; border-radius: 4px;">
                                            <!-- Cash Receipt Tab -->
                                            <div id="cashReceipt" class="inner-tab-pane active">
                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <div class="form-group form-group-lg">
                                                            @Html.LabelFor(model => model.TotalValue, htmlAttributes: new { @class = "" })
                                                            @Html.EditorFor(model => model.TotalValue, new { htmlAttributes = new { @id = "TotalValue", @class = "form-control" } })
                                                            @Html.ValidationMessageFor(model => model.TotalValue, "", new { @class = "text-danger" })
                                                        </div>


                                                        <div class="form-group form-group-lg">
                                                            @Html.LabelFor(model => model.Reference, htmlAttributes: new { @class = "" })
                                                            @Html.EditorFor(model => model.Reference, new { htmlAttributes = new { @class = "form-control" } })
                                                            @Html.ValidationMessageFor(model => model.Reference, "", new { @class = "text-danger" })
                                                        </div>

                                                    </div>
                                                </div>
                                            </div>

                                            <!-- Apportionment Tab -->
                                            <div id="apportionment" class="inner-tab-pane">


                                                <ul class="nav apportionment-nav-tabs" style="margin-bottom: 20px;">
                                                    <li class="apportionment-nav-item">
                                                        <a class="apportionment-nav-link active" data-toggle="tab" href="#apportionToCustomerAccount">Customer Account</a>
                                                    </li>
                                                    <li class="apportionment-nav-item">
                                                        <a class="apportionment-nav-link" data-toggle="tab" href="#apportionToGlAccount">GL Account</a>
                                                    </li>
                                                </ul>



                                                @Html.HiddenFor(model => model.ApportionmentWrapper.ApportionTo, new { @id = "ApportionToType" })



                                                <div class="apportionment-tab-content">

                                                    <input type="hidden" id="apportionmentsData" name="ApportionmentsData" />

                                                    <div id="apportionToCustomerAccount" class="apportionment-tab-pane active">


                                                        <div class="row">
                                                            <div class="col-md-6">
                                                                <input type="hidden" id="CreditCustomerAccountId" name="ApportionmentWrapper.CreditCustomerAccountId" />
                                                                <input type="hidden" id="CreditChartOfAccountId" name="ApportionmentWrapper.CreditChartOfAccountId" />
                                                                <input type="hidden" id="CreditProductDescription" name="ApportionmentWrapper.ProductDescription" />
                                                                <label class="control-label" for="CreditFullAccountNumber">Full Account Number:</label>
                                                                <div class="input-group" data-autoclose="true">
                                                                    <input type="text" id="CreditFullAccountNumber" name="ApportionmentWrapper.FullAccountNumber" class="form-control" readonly />
                                                                    <span class="input-group-addon">
                                                                        <a data-toggle="modal" data-target="#CustomerAccountLookupModal" id="creditCustomerRequest">
                                                                            <span class="fa fa-search"></span>
                                                                        </a>
                                                                    </span>
                                                                </div>
                                                            </div>

                                                            <div class="col-md-6">
                                                                <div class="form-group">
                                                                    <input type="hidden" id="CreditCustomerAccount" name="ApportionmentWrapper.CreditCustomerAccount" />
                                                                    <label class="control-label" for="CreditCustomerFullName">Customer:</label>
                                                                    <input type="text" id="CreditCustomerFullName" name="ApportionmentWrapper.CustomerFullName" class="form-control" readonly />
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="row">
                                                            <div class="col-md-6">
                                                                <div class="form-group">
                                                                    <label class="control-label" for="CreditCustomerReference1">Account Number:</label>
                                                                    <input type="text" id="CreditCustomerReference1" name="ApportionmentWrapper.CustomerReference1" class="form-control" readonly />
                                                                </div>
                                                            </div>
                                                            <div class="col-md-6">
                                                                <div class="form-group">
                                                                    <label class="control-label" for="CreditCustomerReference2">Membership Number:</label>
                                                                    <input type="text" id="CreditCustomerReference2" name="ApportionmentWrapper.CustomerReference2" class="form-control" readonly />
                                                                </div>
                                                            </div>
                                                        </div>

                                                    </div>

                                                    <div id="apportionToGlAccount" class="apportionment-tab-pane">

                                                        <div class="col-md-6">

                                                            <div class="form-group form-group-lg">
                                                                <input type="hidden" id="CreditChartOfAccountIdGl" />
                                                                <label class="control-label">Gl:</label>
                                                                <input type="text" id="CreditChartOfAccountNameGl" class="ChartOfAccountsLookup form-control " />
                                                            </div>
                                                        </div>

                                                    </div>

                                                </div>

                                                <div class="row">
                                                    <div class="col-md-4">
                                                        <div class="form-group">
                                                            <label class="control-label" for="Principal">Principal:</label>
                                                            <input type="text" id="Principal" name="ApportionmentWrapper.Principal" class="form-control" />
                                                        </div>
                                                    </div>
                                                    <div class="col-md-4">
                                                        <div class="form-group">
                                                            <label class="control-label" for="Interest">Interest:</label>
                                                            <input type="text" id="Interest" name="ApportionmentWrapper.Interest" class="form-control" />
                                                        </div>
                                                    </div>
                                                    <div class="col-md-4">
                                                        <div class="form-group">
                                                            <label class="control-label" for="PrimaryDescription">Primary Description:</label>
                                                            <input type="text" id="PrimaryDescription" name="ApportionmentWrapper.PrimaryDescription" class="form-control" />
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="row mt-3">
                                                    <div class="col-md-12">
                                                        <button type="button" id="addButton" class="btn btn-primary float-right">Add</button>
                                                    </div>
                                                </div>

                                                <div class="row mt-3">
                                                    <div class="col-md-12">
                                                        <table class="table table-bordered" id="apportionmentTable">
                                                            <thead>
                                                                <tr>
                                                                    <th>Apportion To</th>
                                                                    <th>Full Account Number</th>
                                                                    <th>Product Name</th>
                                                                    <th>Principal</th>
                                                                    <th>Interest</th>
                                                                    <th>Primary Description</th>
                                                                    @*<th>Secondary Description</th>
                                <th>Reference</th>*@
                                                                </tr>
                                                            </thead>
                                                            <tbody>
                                                                <!-- Dynamic rows -->
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>

                                                <div class="row mt-3">
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <label>Apportioned:</label>
                                                            <input type="number" id="apportioned" class="form-control" value="0.00">
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <label>Shortage:</label>
                                                            <input type="number" id="shortage" class="form-control" value="0.00">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- Specimen Tab -->
                                            <div id="specimen" class="inner-tab-pane">
                                                @if (documents != null && documents.Any())
                                                {
                                                    foreach (var document in documents)
                                                    {
                                                        <div class="document-section card shadow-sm mb-4">
                                                            <div class="card-body">
                                                                <h4 class="card-title text-secondary">Document Set</h4>
                                                                <div class="row">
                                                                    @if (document.PassportPhoto != null)
                                                                    {
                                                                        <div class="col-md-3 text-center">
                                                                            <h5>Passport Photo</h5>
                                                                            <img src="data:image/jpeg;base64,@Convert.ToBase64String(document.PassportPhoto)" alt="Passport Photo" class="img-thumbnail mb-2" width="200" />
                                                                        </div> }
                                                                    else
                                                                    {
                                                                        <div class="col-md-3 text-center">
                                                                            <h5>Passport Photo</h5>
                                                                            <p>No Passport Photo available</p>
                                                                        </div>}

                                                                    @if (document.SignaturePhoto != null)
                                                                    {
                                                                        <div class="col-md-3 text-center">
                                                                            <h5>Signature Photo</h5>
                                                                            <img src="data:image/jpeg;base64,@Convert.ToBase64String(document.SignaturePhoto)" alt="Signature Photo" class="img-thumbnail mb-2" width="200" />
                                                                        </div> }
                                                                    else
                                                                    {
                                                                        <div class="col-md-3 text-center">
                                                                            <h5>Signature Photo</h5>
                                                                            <p>No Signature Photo available</p>
                                                                        </div>}

                                                                    @if (document.IDCardFrontPhoto != null)
                                                                    {
                                                                        <div class="col-md-3 text-center">
                                                                            <h5>ID Card Front</h5>
                                                                            <img src="data:image/jpeg;base64,@Convert.ToBase64String(document.IDCardFrontPhoto)" alt="ID Card Front" class="img-thumbnail mb-2" width="200" />
                                                                        </div> }
                                                                    else
                                                                    {
                                                                        <div class="col-md-3 text-center">
                                                                            <h5>ID Card Front</h5>
                                                                            <p>No ID Card Front available</p>
                                                                        </div>}

                                                                    @if (document.IDCardBackPhoto != null)
                                                                    {
                                                                        <div class="col-md-3 text-center">
                                                                            <h5>ID Card Back</h5>
                                                                            <img src="data:image/jpeg;base64,@Convert.ToBase64String(document.IDCardBackPhoto)" alt="ID Card Back" class="img-thumbnail mb-2" width="200" />
                                                                        </div> }
                                                                    else
                                                                    {
                                                                        <div class="col-md-3 text-center">
                                                                            <h5>ID Card Back</h5>
                                                                            <p>No ID Card Back available</p>
                                                                        </div>}
                                                                </div>
                                                            </div>
                                                        </div>}
                                                }
                                                else
                                                {
                                                    <p>No documents available for this customer.</p>}

                                                <style>
                                                    body {
                                                        background-color: #f4f6f9;
                                                        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                                                    }

                                                    h2 {
                                                        margin-bottom: 30px;
                                                    }

                                                    .document-section.card {
                                                        border-radius: 15px;
                                                        background: linear-gradient(145deg, #e6e6e6, #ffffff);
                                                        box-shadow: 20px 20px 40px #d9d9d9, -20px -20px 40px #ffffff;
                                                        transition: all 0.3s ease;
                                                        overflow: hidden;
                                                    }

                                                        .document-section.card:hover {
                                                            transform: translateY(-10px) scale(1.02);
                                                            box-shadow: 20px 20px 60px #d1d1d1, -20px -20px 60px #ffffff;
                                                        }

                                                    .card-body {
                                                        padding: 20px;
                                                        background: linear-gradient(145deg, #ffffff, #f0f0f0);
                                                        border-radius: 10px;
                                                        box-shadow: inset 5px 5px 10px #d9d9d9, inset -5px -5px 10px #ffffff;
                                                    }

                                                    .card-title {
                                                        font-size: 1.5rem;
                                                        font-weight: 700;
                                                        color: #333;
                                                        text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
                                                    }

                                                    h5 {
                                                        margin-top: 10px;
                                                        color: #007bff;
                                                        text-shadow: 0px 2px 4px rgba(0, 0, 0, 0.2);
                                                    }

                                                    img {
                                                        border: 2px solid #007bff;
                                                        border-radius: 10px;
                                                        transition: transform 0.3s ease, box-shadow 0.3s ease;
                                                        box-shadow: 5px 5px 15px rgba(0, 123, 255, 0.2);
                                                        width: 230px;
                                                    }

                                                        img:hover {
                                                            transform: scale(1.05);
                                                            box-shadow: 10px 10px 20px rgba(0, 123, 255, 0.3);
                                                        }

                                                    .row {
                                                        margin-bottom: 10px;
                                                    }
                                                </style>
                                            </div>


                                        </div>
                                    </div>


                                    <div class="form-group" style="margin-top: 20px; text-align: right;">
                                        <button type="submit" id="submitButton" class="btn btn-primary" style="background-color: #007bff; border: 2px solid #0056b3; padding: 10px 20px; font-weight: bold;">Update</button>
                                    </div>

                                </div>


                                <!-- Teller G/L Account Statement Tab -->
                                <div id="tellerGlAccountStatementCustomerReceipts" class="tab-pane">
                                    <div class="table-responsive">
                                        <table id="tellerGlTableCustomerReceipts" class="table table-striped table-bordered table-hover" style="width:100%;">
                                            <tbody>
                                                <tr>
                                                    <td class="dataTables_empty">
                                                        Loading data from server
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                        <div class="blue-section1" style="display: flex; justify-content: space-between; padding: 20px 50px; margin-top: 20px; align-items: flex-end;">
                                            <!-- Start Date Section -->
                                            <div class="col-md-4">
                                                <label for="startDate">Start Date:</label>
                                                <input type="text" id="startDate" class="form-control" />
                                            </div>

                                            <!-- End Date Section -->
                                            <div class="col-md-4" style="margin-left: 20px;">
                                                <label for="endDate">End Date:</label>
                                                <input type="text" id="endDate" class="form-control" />
                                            </div>

                                            <!-- Button Section -->
                                            <div style="display: flex; gap: 10px;">
                                                <button type="button" id="refreshButton1" class="btn btn-info">Refresh</button>
                                                @*<button type="button" id="printButton" class="btn btn-success">Print</button>*@
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Customer Account Preview Tab -->
                                <div id="customerAccountPreview" class="tab-pane">
                                    <ul class="nav inner-nav-tabs" style="margin-bottom: 20px;">
                                        <li class="nav-item">
                                            <a class="inner-nav-link active" data-toggle="tab" href="#miniStatementCustomerReceipts">Mini Statement</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="inner-nav-link" data-toggle="tab" href="#signatories">Signatories</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="inner-nav-link" data-toggle="tab" href="#unclearedCheques">Uncleared Cheques</a>
                                        </li>
                                    </ul>

                                    <div class="inner-tab-content">
                                        <div id="miniStatementCustomerReceipts" class="inner-tab-pane active">
                                            <!-- Mini Statement Tab -->
                                            <div class="table-responsive">
                                                @if (Model.CustomerAccountMiniStatement != null && Model.CustomerAccountMiniStatement.Any())
                                                {

                                                    <table class="table table-bordered">
                                                        <thead>
                                                            <tr>
                                                                <th>Date</th>
                                                                <th>Description</th>
                                                                <th>Remarks</th>
                                                                <th>Credit</th>
                                                                <th>Balance</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>

                                                            @foreach (var order in Model.CustomerAccountMiniStatement)
                                                            {

                                                                <tr>
                                                                    <td>@order.CreatedDate</td>
                                                                    <td>@order.ProductDescription</td>
                                                                    <td>@order.Remarks</td>
                                                                </tr>
                                                            }



                                                        </tbody>
                                                    </table>
                                                }

                                                else
                                                {
                                                    <p>No mini statement available for this accoun</p>
                                                }
                                            </div>
                                        </div>

                                        <!-- Signatories Tab -->
                                        <div id="signatories" class="inner-tab-pane">
                                            <div class="table-responsive">
                                                @if (Model.CustomerAccountSignatories != null && Model.CustomerAccountSignatories.Any())
                                                {

                                                    <table class="table table-bordered">
                                                        <thead>
                                                            <tr>
                                                                <th>Name</th>
                                                                <th>Gender</th>
                                                                <th>Identity Card Type</th>
                                                                <th>Identity Card Number</th>
                                                                <th>Address Line 1</th>
                                                                <th>Street</th>
                                                                <th>City</th>
                                                                <th>Email</th>
                                                                <th>Mobile Line</th>
                                                                <th>Relationship</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            @foreach (var signatory in Model.CustomerAccountSignatories)
                                                            {

                                                                <tr>

                                                                    <td>@signatory.CustomerAccountCustomerFullName</td>
                                                                    <td>@signatory.Gender</td>
                                                                    <td>@signatory.IdentityCardType</td>
                                                                    <td>@signatory.IdentityCardNumber</td>
                                                                    <td>@signatory.AddressAddressLine1</td>
                                                                    <td>@signatory.AddressStreet</td>
                                                                    <td>@signatory.AddressCity</td>
                                                                    <td>@signatory.AddressEmail</td>
                                                                    <td>@signatory.AddressMobileLine</td>
                                                                    <td>@signatory.Relationship</td>
                                                                </tr>
                                                            }

                                                        </tbody>
                                                    </table>
                                                }

                                                else
                                                {
                                                    <p>No signatories associated with this account</p>
                                                }
                                            </div>
                                        </div>

                                        <!-- Uncleared Cheques Tab -->
                                        <div id="unclearedCheques" class="inner-tab-pane">
                                            <div class="table-responsive">
                                                @if (Model.CustomerAccountUnclearedCheques != null && Model.CustomerAccountUnclearedCheques.Any())
                                                {

                                                    <table class="table table-bordered">
                                                        <thead>
                                                            <tr>
                                                                <th>Cheque Number</th>
                                                                <th>Amount</th>
                                                                <th>Drawer</th>
                                                                <th>Drawer Bank</th>
                                                                <th>Write Date</th>
                                                                <th>Maturity Date</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            @foreach (var cheque in Model.CustomerAccountUnclearedCheques)
                                                            {

                                                                <tr>

                                                                    <td>@cheque.Number</td>
                                                                    <td>@cheque.Amount</td>
                                                                    <td>@cheque.Drawer</td>
                                                                    <td>@cheque.DrawerBank</td>
                                                                    <td>@cheque.WriteDate </td>
                                                                    <td>@cheque.MaturityDate</td>
                                                                </tr>
                                                            }

                                                        </tbody>
                                                    </table>
                                                }

                                                else
                                                {
                                                    <p>No uncleared cheques associated with this account</p>
                                                }
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    }
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="CustomerAccountLookupModal" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog custom-modal-styles" role="document">
            <div class="modal-content">
                <!-- Modal Header -->
                <div class="modal-header bg-primary">
                    <h4 class="font-bold">Credit Customers Account Lookup</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span class="sr-only">Close</span>
                    </button>
                </div>

                <!-- Modal Body (Scrollable Table Content) -->
                <div class="modal-body">
                    <!-- Filter Form & Controls (Fixed) -->
                    <form id="modalFilterForm">
                        <div class="form-row">
                            <div class="form-group col-md-6">
                                @Html.DropDownListFor(m => m.CustomerAccount.CustomerAccountTypeProductCode, productCode, new { @class = "form-control", id = "productCode" })
                            </div>
                            <div class="form-group col-md-6">
                                @Html.DropDownListFor(m => m.CustomerAccount.CustomerFilter, customerFilter, new { @class = "form-control", id = "customerFilter" })
                            </div>
                        </div>
                        <div class="form-row justify-content-end">
                            <div class="col-auto">
                                <button type="submit" class="btn btn-primary">Refresh</button>
                            </div>
                        </div>

                    </form>

                    <!-- Table & Scrollable Data Rows -->
                    <div class="table-responsive table-scroll">
                        <table id="CustomerAccountsGrid" class="table table-striped table-bordered table-hover" style="width: 100%;">
                            <thead>
                                <tr>
                                    <th>Customer Full Name</th>
                                    <th>Account No.</th>
                                    <th>Membership</th>
                                    <th>Product</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td colspan="5" class="dataTables_empty">Loading data from server...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

             
            </div>
        </div>
    </div>
</div>


<div class="modal fade" id="CustomerLookupModal" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header bg-primary">
                <h3 class="font-bold">
                    Customers Lookup
                    <button type="button" class="close" data-dismiss="modal"><span class="sr-only">Close</span></button>
                </h3>
            </div>
            <div class="modal-body">
                <!-- Table for Account Closure Requests -->
                <div class="table-responsive" style="overflow-x: auto;">
                    <table id="CustomersGrid" class="table table-striped table-bordered table-hover" style="min-width: 1000px;">
                        <tbody>
                            <tr>
                                <td class="dataTables_empty">Loading data from server</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Filter Form -->
                <div class="blue-section mt-1">
                    <form id="CustomerModalFilterForm">
                        <div class="row align-items-end mb-3">
                            <div class="col-md-3">
                                <div id="items-dropdown"></div>
                            </div>
                            <div class="col-md-9">
                                <div id="page-control"></div>
                            </div>
                        </div>

                        @*<div class="row align-items-end mb-3">

                            </div>*@

                        <div class="row align-items-end">

                            <div class="col-md-2">
                                <div class="form-group mb-0">

                                    <div class="input-group">

                                        @Html.DropDownListFor(m => m.CustomerRecordStatus, recordStatus, new { @class = "form-control", @id = "CustomerRecordStatus" })
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-2">
                                <div class="form-group mb-0">

                                    <div class="input-group">

                                        @Html.DropDownListFor(m => m.CustomerFilter, customerFilter,
                                        new { @class = "form-control", @id = "CustomerFilter" })
                                    </div>
                                </div>
                            </div>




                            <div class="col-md-6">
                                <div id="searchField" class="form-group mb-0"></div>
                            </div>
                            <div class="col-md-2">
                                <div class="form-group mb-0">
                                    <button type="submit" id="refreshButton" class="btn btn-success form-control">Refresh</button>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>

                <style>
                    .blue-section {
                        background-color: #e6f3ff;
                        padding: 15px;
                        border-radius: 5px;
                    }

                    .row.align-items-end {
                        display: flex;
                        align-items: flex-end;
                    }

                        .row.align-items-end > div {
                            display: flex;
                            flex-direction: column;
                        }

                    #searchField {
                        width: 100%;
                    }

                        #searchField .dataTables_filter {
                            margin-bottom: 0;
                            width: 100%;
                        }

                            #searchField .dataTables_filter label {
                                width: 100%;
                                margin-bottom: 0;
                                display: flex;
                            }

                            #searchField .dataTables_filter input {
                                width: 100% !important;
                                margin-left: 0 !important;
                                height: calc(1.5em + .75rem + 2px); /* Match Bootstrap's form-control height */
                            }

                    #items-dropdown .dataTables_length {
                        margin-bottom: 0;
                    }

                    #page-control .dataTables_paginate {
                        float: right;
                    }
                </style>
            </div>

       
        </div>
    </div>
</div>

<input type='hidden' id='h' name='h' />




@section Styles{
    @Styles.Render("~/Content/plugins/iCheck/iCheckStyles")
    @Styles.Render("~/plugins/wizardStepsStyles")
    @Styles.Render("~/Content/plugins/dataTables/dataTablesStyles")
    @Styles.Render("~/plugins/awesomeCheckboxStyles")
    @Styles.Render("~/plugins/clockpickerStyles")
    @Styles.Render("~/plugins/dateRangeStyles")
    @Styles.Render("~/Content/plugins/chosen/chosenStyles")
    @Styles.Render("~/plugins/switcheryStyles")
    @Styles.Render("~/plugins/jasnyBootstrapStyles")
    @Styles.Render("~/plugins/nouiSliderStyles")
    @Styles.Render("~/plugins/dataPickerStyles")
    @Styles.Render("~/Content/plugins/ionRangeSlider/ionRangeStyles")
    @Styles.Render("~/plugins/imagecropperStyles")
    @Styles.Render("~/Content/plugins/colorpicker/colorpickerStyles")
    @Styles.Render("~/plugins/select2Styles")
    @Styles.Render("~/plugins/touchSpinStyles")
    @Styles.Render("~/plugins/tagInputsStyles")
    @Styles.Render("~/plugins/duallistStyles")
}

@section Scripts{

    @Scripts.Render("~/plugins/wizardSteps")
    @Scripts.Render("~/plugins/validate")
    @Scripts.Render("~/plugins/typehead")
    @Scripts.Render("~/plugins/dataTables")
    @Scripts.Render("~/plugins/iCheck")
    @Scripts.Render("~/plugins/dataPicker")
    @Scripts.Render("~/plugins/ionRange")
    @Scripts.Render("~/plugins/nouiSlider")
    @Scripts.Render("~/plugins/jasnyBootstrap")
    @Scripts.Render("~/plugins/switchery")
    @Scripts.Render("~/plugins/chosen")
    @Scripts.Render("~/plugins/knob")
    @Scripts.Render("~/plugins/imagecropper")
    @Scripts.Render("~/plugins/colorpicker")
    @Scripts.Render("~/plugins/clockpicker")
    @Scripts.Render("~/plugins/dateRange")
    @Scripts.Render("~/plugins/select2")
    @Scripts.Render("~/plugins/touchSpin")
    @Scripts.Render("~/plugins/tagInputs")
    @Scripts.Render("~/plugins/duallist")

    <script>
        var customerAccountsUrl = '@Url.Action("FetchCustomerAccountsTable", "CustomerReceipts", new { Area = "FrontOffice" })';
        var customerReceiptsUrl = '@Url.Action("Index", "CustomerReceipts", new { Area = "FrontOffice" })';
        var customersUrl = '@Url.Action("Index", "Customer", new { Area = "Registry" })';
        var chartOfAccountsUrl = '@Url.Action("GetChartOfAccountsAsync", "ChartOfAccount", new { Area = "Accounts" })';
    </script>

    @Scripts.Render("~/plugins/customerReceiptsFunctions")
}