@model Application.MainBoundedContext.DTO.FrontOfficeModule.AccountClosureRequestDTO

@{
    ViewBag.Title = "Details";
    var customerTypes = ViewBag.AccountClosureSelectList as List<SelectListItem>;

}
<div class="row wrapper border-bottom white-bg page-heading">
    <div class="col-lg-10">
        <h2>Account Closure</h2>
        <ol class="breadcrumb">
            <li class="breadcrumb-item">
                @Html.ActionLink("Dashboard", "Index", "Home", new { Area = "" }, null)
            </li>
            <li class="breadcrumb-item">
                @Html.ActionLink("Home", "Index", "AccountClosure", new { Area = "FrontOffice" }, null)
            </li>
            <li class="breadcrumb-item active">
                <strong>View</strong>
            </li>
        </ol>
    </div>
</div>

<div class="wrapper wrapper-content">
    <div class="row">
        <div class="col-lg-12">
            <div class="ibox">
                <div class="ibox-title">
                    <div class="ibox-tools">
                        <a class="collapse-link">
                            <i class="fa fa-chevron-up"></i>
                        </a>
                        <a class="close-link">
                            <i class="fa fa-times"></i>
                        </a>
                    </div>
                </div>
                <div class="ibox-content text-info">
                    <div class="form-horizontal">
                        
                        <!-- First Row -->
                        <div class="row">
                            <div class="col-lg-3">
                                <div class="form-group form-group-lg">
                                    @Html.LabelFor(model => model.CustomerAccountFullAccountNumber, htmlAttributes: new { @class = "control-label" })
                                    @Html.EditorFor(model => model.CustomerAccountFullAccountNumber, new { htmlAttributes = new { @class = "form-control", @placeholder = "Account Status", @required = "" } })
                                    @Html.ValidationMessageFor(model => model.CustomerAccountFullAccountNumber, "", new { @class = "text-danger" })
                                </div>
                            </div>


                            <div class="col-lg-3">
                                <div class="form-group form-group-lg">
                                    @Html.LabelFor(model => model.CustomerAccountStatusDescription, htmlAttributes: new { @class = "control-label" })
                                    @Html.EditorFor(model => model.CustomerAccountStatusDescription, new { htmlAttributes = new { @class = "form-control", @placeholder = "Account Status", @required = "" } })
                                    @Html.ValidationMessageFor(model => model.CustomerAccountStatusDescription, "", new { @class = "text-danger" })
                                </div>
                            </div>

                            <div class="col-lg-3">
                                <div class="form-group form-group-lg">
                                    @Html.LabelFor(model => model.CustomerAccountRemarks, htmlAttributes: new { @class = "control-label" })
                                    @Html.EditorFor(model => model.CustomerAccountRemarks, new { htmlAttributes = new { @id = "CustomerAccountRemarks", @class = "form-control", @placeholder = "Account Remarks", @required = "" } })
                                    @Html.ValidationMessageFor(model => model.CustomerAccountRemarks, "", new { @class = "text-danger" })
                                </div>
                            </div>

                            <div class="col-lg-3">
                                <div class="form-group form-group-lg">
                                    @Html.LabelFor(model => model.CustomerAccountTypeTargetProductDescription, htmlAttributes: new { @class = "control-label" })
                                    @Html.EditorFor(model => model.CustomerAccountTypeTargetProductDescription, new { htmlAttributes = new { @id = "CustomerAccountTypeTargetProductDescription", @class = "form-control", @placeholder = "Product Name", @required = "" } })
                                    @Html.ValidationMessageFor(model => model.CustomerAccountTypeTargetProductDescription, "", new { @class = "text-danger" })
                                </div>
                            </div>
                        </div>

                        <!-- Second Row -->
                        <div class="row">
                            <div class="col-lg-3">
                                <div class="form-group form-group-lg">
                                    @Html.HiddenFor(model => model.CustomerAccountCustomerId)
                                    @Html.LabelFor(model => model.CustomerAccountCustomerFullName, htmlAttributes: new { @class = "control-label" })
                                    @Html.EditorFor(model => model.CustomerAccountCustomerFullName, new { htmlAttributes = new { @id = "CustomerAccountCustomerId", @class = "form-control", @placeholder = "Customer", @required = "" } })
                                    @Html.ValidationMessageFor(model => model.CustomerAccountCustomerFullName, "", new { @class = "text-danger" })
                                </div>
                            </div>

                            <div class="col-lg-3">
                                <div class="form-group form-group-lg">
                                    @Html.LabelFor(model => model.CustomerAccountCustomerTypeDescription, htmlAttributes: new { @class = "control-label" })
                                    @Html.EditorFor(model => model.CustomerAccountCustomerTypeDescription, new { htmlAttributes = new { @class = "form-control datepicker", @placeholder = "Type", @id = "CustomerAccountCustomerTypeDescription", @required = "" } })
                                    @Html.ValidationMessageFor(model => model.CustomerAccountCustomerTypeDescription, "", new { @class = "text-danger" })
                                </div>
                            </div>

                            <div class="col-lg-6">
                                <div class="form-group form-group-lg">
                                    @Html.LabelFor(model => model.CustomerAccountCustomerIndividualPayrollNumbers, htmlAttributes: new { @class = "control-label" })
                                    @Html.EditorFor(model => model.CustomerAccountCustomerIndividualPayrollNumbers, new { htmlAttributes = new { @class = "form-control datepicker", @placeholder = "Payroll Number", @id = "CustomerAccountCustomerIndividualPayrollNumbers", @required = "" } })
                                    @Html.ValidationMessageFor(model => model.CustomerAccountCustomerIndividualPayrollNumbers, "", new { @class = "text-danger" })
                                </div>
                            </div>
                        </div>

                        <!-- Third Row -->
                        <div class="row">
                            <div class="col-lg-3">
                                <div class="form-group form-group-lg">
                                    @Html.LabelFor(model => model.CustomerAccountCustomerIdentificationNumber, htmlAttributes: new { @class = "control-label" })
                                    @Html.EditorFor(model => model.CustomerAccountCustomerIdentificationNumber, new { htmlAttributes = new { @class = "form-control datepicker", @placeholder = "Identification Number", @id = "CustomerAccountCustomerIdentificationNumber", @required = "" } })
                                    @Html.ValidationMessageFor(model => model.CustomerAccountCustomerIdentificationNumber, "", new { @class = "text-danger" })
                                </div>
                            </div>

                            <div class="col-lg-3">
                                <div class="form-group form-group-lg">
                                    @Html.LabelFor(model => model.CustomerAccountCustomerReference1, htmlAttributes: new { @class = "control-label" })
                                    @Html.EditorFor(model => model.CustomerAccountCustomerReference1, new { htmlAttributes = new { @class = "form-control datepicker", @placeholder = "Account Number", @id = "CustomerAccountCustomerReference1", @required = "" } })
                                    @Html.ValidationMessageFor(model => model.CustomerAccountCustomerReference1, "", new { @class = "text-danger" })
                                </div>
                            </div>

                            <div class="col-lg-3">
                                <div class="form-group form-group-lg">
                                    @Html.LabelFor(model => model.CustomerAccountCustomerReference2, htmlAttributes: new { @class = "control-label" })
                                    @Html.EditorFor(model => model.CustomerAccountCustomerReference2, new { htmlAttributes = new { @class = "form-control datepicker", @placeholder = "Membership Number", @id = "CustomerAccountCustomerReference2", @required = "" } })
                                    @Html.ValidationMessageFor(model => model.CustomerAccountCustomerReference2, "", new { @class = "text-danger" })
                                </div>
                            </div>

                            <div class="col-lg-3">
                                <div class="form-group form-group-lg">
                                    @Html.LabelFor(model => model.CustomerAccountCustomerReference3, htmlAttributes: new { @class = "control-label" })
                                    @Html.EditorFor(model => model.CustomerAccountCustomerReference3, new { htmlAttributes = new { @class = "form-control datepicker", @placeholder = "PersonalFile Number", @id = "CustomerAccountCustomerReference3", @required = "" } })
                                    @Html.ValidationMessageFor(model => model.CustomerAccountCustomerReference3, "", new { @class = "text-danger" })
                                </div>
                            </div>

                            <div class="col-lg-12">
                                <div class="form-group form-group-lg">
                                    @Html.LabelFor(model => model.Reason, htmlAttributes: new { @class = "control-label" })
                                    @Html.TextAreaFor(model => model.Reason, new { @rows = 3, @class = "form-control", @placeholder = "Enter Reasons", @required = "" })
                                </div>
                            </div>
                        </div>

                        <br />
                        <hr />


                        <ul class="nav nav-tabs" id="loanAccountsTab">
                            <li class="nav-item">
                                <a class="nav-link active" href="#loanAccounts" data-toggle="tab">Loan Accounts</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#investmentAccounts" data-toggle="tab">Investment Accounts</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#loansGuaranteed" data-toggle="tab">Loans Guaranteed</a>
                            </li>
                        </ul>

                        <div class="tab-content">
                            <!-- Loan Accounts Tab Content -->
                            <div id="loanAccounts" class="tab-pane fade show active">
                                <h3>Customer Loan Accounts</h3>

                                @if (ViewBag.LoanAccounts != null && ViewBag.LoanAccounts.Count > 0)
                                {
                                    <table class="table table-bordered">
                                        <thead>
                                            <tr>
                                                <th>Full Account Number</th>
                                                <th>Status</th>
                                                <th>Remarks</th>
                                                <th>Product Code</th>
                                                <th>Product Name</th>
                                                <th>Section</th>
                                                <th>Branch</th>
                                                <th>Book Balance</th>
                                                <th>Principal Balance</th>
                                                <th>Interest Balance</th>
                                                <th>Record Status</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            @foreach (var levySplit in ViewBag.LoanAccounts)
                                            {
                                                <tr>
                                                    <td>@levySplit.FullAccountNumber</td>
                                                    <td>@levySplit.StatusDescription</td>
                                                    <td>@levySplit.Remarks</td>
                                                    <td>@levySplit.CustomerAccountTypeTargetProductCode</td>
                                                    <td>@levySplit.CustomerAccountTypeTargetProductDescription</td>
                                                    <td>@levySplit.CustomerAccountTypeTargetProductLoanProductSectionDescription</td>
                                                    <td>@levySplit.BranchDescription</td>
                                                    <td>@levySplit.BookBalance</td>
                                                    <td>@levySplit.PrincipalBalance</td>
                                                    <td>@levySplit.InterestBalance</td>
                                                    <td>@levySplit.RecordStatus</td>
                                                </tr>
                                            }
                                        </tbody>
                                    </table>
                                }
                                else
                                {
                                    <p>No loan accounts found for this customer.</p>
                                }
                            </div>

                            <!-- Investment Accounts Tab Content -->
                            <div id="investmentAccounts" class="tab-pane fade">
                                <h3>Customer Investment Accounts</h3>

                                @if (ViewBag.InvestmentAccounts != null && ViewBag.InvestmentAccounts.Count > 0)
                                {
                                    <table class="table table-bordered">
                                        <thead>
                                            <tr>
                                                <th>Parent Chart of Account Name</th>
                                                <th>Description</th>
                                                <th>Minimum Balance</th>
                                                <th>Maximum Balance</th>
                                                <th>Pool Amount</th>
                                                <th>Annual Percentage Yield</th>
                                                <th>Transfer Balance on Termination</th>
                                                <th>Account Name</th>
                                                <th>Chart of Account Name</th>
                                                <th>Cost Center</th>
                                                <th>Product Name</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            @foreach (var investmentAccount in ViewBag.InvestmentAccounts)
                                            {
                                                <tr>
                                                    <td>@investmentAccount.ParentChartOfAccountNameDescription</td>
                                                    <td>@investmentAccount.Description</td>
                                                    <td>@investmentAccount.MinimumBalance</td>
                                                    <td>@investmentAccount.MaximumBalance</td>
                                                    <td>@investmentAccount.PoolAmount</td>
                                                    <td>@investmentAccount.AnnualPercentageYield</td>
                                                    <td>@investmentAccount.TransferBalanceToParentOnMembershipTermination</td>
                                                    <td>@investmentAccount.ChartOfAccountAccountName</td>
                                                    <td>@investmentAccount.ChartOfAccountName</td>
                                                    <td>@investmentAccount.ChartOfAccountCostCenterDescription</td>
                                                    <td>@investmentAccount.ProductName</td>
                                                </tr>
                                            }
                                        </tbody>
                                    </table>
                                }
                                else
                                {
                                    <p>No investment accounts found for this customer.</p>
                                }
                            </div>


                            <!-- Loans Guaranteed Tab Content -->
                            <div id="loansGuaranteed" class="tab-pane fade">
                                <h3>Loans Guaranteed</h3>
                                <!-- Add your content for loans guaranteed here -->

                                @if (ViewBag.LoanGuarantors != null && ViewBag.LoanGuarantors.Count > 0)
                                {
                                    <table class="table table-bordered">
                                        <thead>
                                            <tr>
                                                <th>Customer FullName</th>
                                                <th>Guarantor Customer FullName</th>
                                                <th>Loanee Customer FullName</th>
                                                <th>LoanProduct Description</th>
                                                <th>LoanCaseStatus Description</th>
                                                <th>CustomerType Description</th>
                                                <th>CustomerAddress MobileLine</th>
                                                <th>AmountGuaranteed</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            @foreach (var guarantor in ViewBag.LoanGuarantors)
                                            {
                                                <tr>
                                                    <td>@guarantor.CustomerFullName</td>
                                                    <td>@guarantor.GuarantorCustomerFullName</td>
                                                    <td>@guarantor.LoaneeCustomerFullName</td>
                                                    <td>@guarantor.LoanProductDescription</td>
                                                    <td>@guarantor.LoanCaseStatusDescription</td>
                                                    <td>@guarantor.CustomerTypeDescription</td>
                                                    <td>@guarantor.CustomerAddressMobileLine</td>
                                                    <td>@guarantor.AmountGuaranteed</td>
                                                </tr>
                                            }
                                        </tbody>
                                    </table>
                                }
                                else
                                {
                                    <p>No loan guarantors found for this customer.</p>
                                }
                            </div>






                        </div>


                        <br />
                        <hr />


                        <div class="summary-section">
                            <h3>Account Closure Summary</h3>
                            <div class="row">
                                <div class="col-lg-4">
                                    <div class="form-group">
                                        @Html.Label("Investments Balance (R)", htmlAttributes: new { @class = "control-label" })
                                        <input type="text" class="form-control" readonly value="@Model.InvestmentBalance.ToString("C2")" />
                                    </div>
                                </div>
                                <div class="col-lg-4">
                                    <div class="form-group">
                                        @Html.Label("Loans Balance (R)", htmlAttributes: new { @class = "control-label" })
                                        <input type="text" class="form-control" readonly value="@Model.LoanBalance.ToString("C2")" />
                                    </div>
                                </div>
                                <div class="col-lg-4">
                                    <div class="form-group">
                                        @Html.Label("Net Refundable (R)", htmlAttributes: new { @class = "control-label" })
                                        <input type="text" class="form-control" readonly value="@Model.NetRefundable.ToString("C2")" />
                                    </div>
                                </div>
                            </div>
                        </div>








                        <div class="row">
                            <div class="col-lg-12 text-right">
                                <p>
                                    @Html.ActionLink("Edit", "Edit", "AccountClosure", new { id = Model.Id, Area = "FrontOffice" }, new { @class = "btn btn-success" })
                                    @Html.ActionLink("Back to List", "Index", "AccountClosure", new { Area = "FrontOffice" }, new { @class = "btn btn-success" })
                                </p>
                            </div>
                        </div>

                    </div>
            </div>
        </div>
    </div>
</div>
</div>
